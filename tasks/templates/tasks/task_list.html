
{% extends "base.html" %}
{% load static %}
{% block content %}
<div class="max-w-xl mx-auto mt-12 p-6 bg-zinc-900 rounded-xl shadow-lg">
    <h2 class="text-3xl font-bold text-white mb-6">My Tasks</h2>

    <!-- Add Task Form -->
    <form method="POST" class="flex items-center gap-3 mb-6">
        {% csrf_token %}
        <input name="title" type="text" placeholder="Enter a task..." class="flex-1 px-4 py-2 rounded-md bg-zinc-800 text-white placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-violet-500" required>
        <input name="due_date" type="date" class="px-3 py-2 rounded-md bg-zinc-800 text-white focus:outline-none focus:ring-2 focus:ring-violet-500">
        <button type="submit" class="px-4 py-2 bg-violet-600 hover:bg-violet-700 text-white rounded-md">Add</button>
    </form>


<!-- Task List -->
<ul class="space-y-3">
    {% for task in tasks %}
    <li class="flex items-center justify-between p-3 rounded-md bg-zinc-800">
        <div class="flex items-center gap-3">
            <form method="POST" action="{% url 'toggle_task' task.id %}">
                {% csrf_token %}
                <input type="checkbox" onchange="this.form.submit()" {% if task.is_completed %}checked{% endif %} class="w-5 h-5 accent-violet-500">
            </form>
            <div class="flex flex-col">
                <span class="{% if task.is_completed %}line-through text-zinc-400{% else %}text-white{% endif %}">{{ task.title }}</span>
                {% if task.due_date %}
                <span class="text-sm text-red-400">Due: {{ task.due_date|date:"j M" }}</span>
                {% endif %}
            </div>
        </div>

        <!-- Delete Button -->
        <form method="POST" action="{% url 'delete_task' task.id %}">
            {% csrf_token %}
            <button type="submit" class="text-red-500 hover:text-red-600 transition">
                <i class="bi bi-trash3-fill text-xl"></i>
            </button>
        </form>
    </li>
    {% endfor %}
</ul>

</div>
{% endblock %}
